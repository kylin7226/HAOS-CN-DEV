# ROCK 5B specific kernel configuration for mainline kernel (headless mode)
# Optimized for Home Assistant without desktop environment
# Note: Some RK3588 specific features may not be available in mainline

#
# Basic GPU Support for RK3588 (Headless/Server mode)
#

# Mali GPU Driver (Panfrost - mainline driver)
# Enable for hardware video decode and basic acceleration
CONFIG_DRM=y
CONFIG_DRM_PANFROST=y
# Note: CONFIG_DRM_LIMA is for older Mali GPUs
# CONFIG_DRM_LIMA is not set

# Mainline kernel does not have full RKNPU support
# These configs are for reference but may not be available:
# CONFIG_ROCKCHIP_RKNPU is not available in mainline
# CONFIG_ROCKCHIP_RKNPU_DEBUG_FS is not available
# CONFIG_ROCKCHIP_RKNPU_DRM_GEM is not available

# Video Processing Units (Limited in mainline)
CONFIG_V4L2_MEM2MEM_DEV=y
CONFIG_VIDEOBUF2_CORE=y
CONFIG_VIDEOBUF2_DMA_CONTIG=y
CONFIG_VIDEOBUF2_MEMOPS=y

# RGA support may be limited in mainline
# CONFIG_ROCKCHIP_RGA may not be available
# CONFIG_ROCKCHIP_RGA2 may not be available

# VPU support (may be limited)
# CONFIG_ROCKCHIP_VDEC may not be available  
# CONFIG_ROCKCHIP_VENC may not be available

# IOMMU Support (should be available)
CONFIG_IOMMU_SUPPORT=y
CONFIG_ROCKCHIP_IOMMU=y

# DMA Engine support
CONFIG_DMADEVICES=y
CONFIG_PL330_DMA=y

# CMA (Contiguous Memory Allocator)
CONFIG_CMA=y
CONFIG_DMA_CMA=y
CONFIG_CMA_SIZE_MBYTES=256

# Performance monitoring
CONFIG_ARM_PMU=y
CONFIG_HW_PERF_EVENTS=y

# Additional RK3588 support that may be available
CONFIG_ROCKCHIP_THERMAL=y
CONFIG_ROCKCHIP_LVDS=y
CONFIG_PWM_ROCKCHIP=y
CONFIG_ROCKCHIP_SARADC=y
CONFIG_SPI_ROCKCHIP=y
CONFIG_I2C_RK3X=y

# PCIe support for RK3588
CONFIG_PCIE_ROCKCHIP_DW_HOST=y
CONFIG_PCI=y
CONFIG_PCIEPORTBUS=y

# USB support
CONFIG_USB_DWC3=y
CONFIG_USB_DWC3_OF_SIMPLE=y
CONFIG_USB_EHCI_HCD=y
CONFIG_USB_OHCI_HCD=y

# Ethernet (2.5G support)
CONFIG_STMMAC_ETH=y
CONFIG_DWMAC_ROCKCHIP=y

# SATA support
CONFIG_SATA_AHCI=y
CONFIG_AHCI_PLATFORM=y
CONFIG_SATA_AHCI_PLATFORM=y